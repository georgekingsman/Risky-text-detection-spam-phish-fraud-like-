# DedupShift è¯æ®é“¾è¡¥é½ - å®Œæˆæ€»ç»“

## ä»»åŠ¡ç›®æ ‡

è¡¥å…… DedupShift æ–¹æ³•çš„**å®šé‡è¯æ®**ï¼Œå°†è®ºæ–‡ä»"æ–¹æ³•æå‡º"å‡çº§ä¸º"æ–¹æ³•+æ•°æ®éªŒè¯"ï¼Œæ»¡è¶³ CCF-C çº§åˆ«ä¼šè®®çš„å®è¯è¦æ±‚ã€‚

---

## å·²å®Œæˆå·¥ä½œ

### 1. åˆ›å»ºç»Ÿè®¡è¡¨ç”Ÿæˆè„šæœ¬
**æ–‡ä»¶**: `src/generate_leakage_table.py`

**åŠŸèƒ½**:
- ä» `dedup_report_*.csv` æå–å…³é”®æŒ‡æ ‡
- ç”Ÿæˆæœºå™¨å¯è¯»çš„æ±‡æ€»è¡¨ `results/dedup_leakage_stats.csv`
- è¾“å‡ºç»ˆç«¯å‹å¥½çš„ç»Ÿè®¡æ‘˜è¦

**æ ¸å¿ƒæŒ‡æ ‡**:
- æ ·æœ¬æ•°å˜åŒ–ï¼ˆn_original â†’ n_deduplicatedï¼‰
- ä¿ç•™ç‡ï¼ˆretention_rate_%ï¼‰
- ç²¾ç¡®/è¿‘ä¼¼é‡å¤åˆ†å¸ƒï¼ˆn_exact_dup / n_near_dupï¼‰
- æ³„æ¼æ¶ˆé™¤æ•ˆæœï¼ˆorig_overlap â†’ dedup_overlapï¼‰
- é‡å å‡å°‘ç™¾åˆ†æ¯”ï¼ˆoverlap_reduction_%ï¼‰

---

### 2. ç”Ÿæˆå®šé‡è¯æ®è¡¨
**æ–‡ä»¶**: `results/dedup_leakage_stats.csv`

#### SMS (UCI) æ•°æ®é›†
- **æ ·æœ¬**: 5,574 â†’ 5,126 (ä¿ç•™ **92.0%**)
- **ç§»é™¤**: 448 (415 ç²¾ç¡® + 33 è¿‘ä¼¼)
- **æ³„æ¼æ¶ˆé™¤**:
  - Train/Test: **69 â†’ 0** âœ…
  - Train/Val: **60 â†’ 0** âœ…
  - Val/Test: **10 â†’ 0** âœ…
  - **æ€»è®¡**: 139 â†’ 0 (**100%** æ¶ˆé™¤)

#### SpamAssassin æ•°æ®é›†
- **æ ·æœ¬**: 6,008 â†’ 2,884 (ä¿ç•™ **48.0%**)
- **ç§»é™¤**: 3,124 (3,070 ç²¾ç¡® + 54 è¿‘ä¼¼)
- **æ³„æ¼æ¶ˆé™¤**:
  - Train/Test: **494 â†’ 0** âœ…
  - Train/Val: **491 â†’ 0** âœ…
  - Val/Test: **58 â†’ 0** âœ…
  - **æ€»è®¡**: 1,043 â†’ 0 (**100%** æ¶ˆé™¤)

**å…³é”®ç»“è®º**: ä¸¤ä¸ªæ•°æ®é›†å‡å®ç° **å®Œå…¨çš„è®­ç»ƒ-æµ‹è¯•éš”ç¦»**ï¼Œæ— äº¤å‰æ±¡æŸ“ã€‚

---

### 3. æ›´æ–° Makefile
**å˜æ›´**: åœ¨ `paper_repro` ç›®æ ‡ä¸­æ·»åŠ  `generate_leakage_table` æ­¥éª¤

**ä½ç½®**: åœ¨ `generate_sensitivity_tables` å’Œ `generate_paper_tables` ä¹‹é—´æ’å…¥

**å¥½å¤„**:
- ä¸€é”®å¤ç°æ‰€æœ‰è®ºæ–‡æ•°æ®ï¼ˆ`make paper_repro`ï¼‰
- ç¡®ä¿ç»Ÿè®¡è¡¨ä¸å®éªŒç»“æœåŒæ­¥æ›´æ–°
- ç¬¦åˆå¯å¤ç°ç ”ç©¶çš„æœ€ä½³å®è·µ

---

### 4. åˆ›å»ºè¯æ®é“¾æ–‡æ¡£
**æ–‡ä»¶**: `DEDUP_LEAKAGE_EVIDENCE.md`

**å†…å®¹**:
- ğŸ“Š **å…³é”®å‘ç°æ€»ç»“**ï¼ˆå¯ç›´æ¥å¼•ç”¨çš„æ•°å­—ï¼‰
- ğŸ“ **è®ºæ–‡å¼•ç”¨å»ºè®®**ï¼ˆä¸­æ–‡æ®µè½ + LaTeX è¡¨æ ¼æ¨¡æ¿ï¼‰
- ğŸ”¬ **è®¨è®ºä»·å€¼**ï¼ˆæ–¹æ³•æœ‰æ•ˆæ€§ã€ä¿ç•™ç‡å·®å¼‚åˆ†æï¼‰
- âš ï¸ **Threats to Validity è¡¥å……å»ºè®®**
- ğŸ”„ **å¤ç°æŒ‡ä»¤**ï¼ˆæ•°æ®æ¥æºã€è¿è¡Œæ–¹æ³•ï¼‰

**å®šä½**: ä½œä¸ºè®ºæ–‡å†™ä½œçš„"æŠ„ä½œä¸š"å‚è€ƒï¼Œç›´æ¥å¤åˆ¶ç²˜è´´å³å¯

---

## è®ºæ–‡æ”¹è¿›å»ºè®®

### åœ¨ DedupShift æ–¹æ³•ç« èŠ‚æ·»åŠ 

#### æ–°å¢æ®µè½ï¼ˆå»ºè®®æ’å…¥ä½ç½®ï¼šæ–¹æ³•æè¿°åï¼‰
> **å®šé‡éªŒè¯**: è¡¨ X å±•ç¤ºäº† DedupShift åœ¨ä¸¤ä¸ªæ•°æ®é›†ä¸Šçš„æ³„æ¼æ¶ˆé™¤æ•ˆæœã€‚å¯¹äº SMS æ•°æ®é›†ï¼Œè¯¥æ–¹æ³•åœ¨ä¿ç•™ 92% æ ·æœ¬çš„å‰æä¸‹ï¼Œå®Œå…¨æ¶ˆé™¤äº† 139 ä¸ª train/test äº¤å‰é‡å æ ·æœ¬ï¼ˆ100% æ³„æ¼æ¶ˆé™¤ï¼‰ã€‚å¯¹äº SpamAssassin æ•°æ®é›†ï¼Œè™½ç„¶å»é‡ç‡æ›´é«˜ï¼ˆä¿ç•™ 48%ï¼‰ï¼Œä½†åŒæ ·å®ç°äº† 1,043 ä¸ªé‡å æ ·æœ¬çš„å®Œå…¨æ¸…é™¤ã€‚è¿™ä¸€ç»“æœè¯æ˜ï¼ŒDedupShift èƒ½å¤Ÿåœ¨ä¸åŒæ•°æ®ç‰¹å¾ä¸‹ï¼ˆSMS çš„çŸ­æ¶ˆæ¯ vs SpamAssassin çš„é‚®ä»¶æ¨¡æ¿ï¼‰ï¼Œç¨³å®šåœ°ä¿è¯è®­ç»ƒ-æµ‹è¯•åˆ†ç¦»çš„çº¯å‡€æ€§ã€‚

#### æ–°å¢è¡¨æ ¼ï¼ˆLaTeXï¼‰
```latex
\begin{table}[t]
\centering
\caption{DedupShift æ³„æ¼æ¶ˆé™¤å®šé‡è¯æ®ã€‚ä¸¤ä¸ªæ•°æ®é›†å‡å®ç° 100\% çš„è®­ç»ƒ-æµ‹è¯•é‡å æ¶ˆé™¤ï¼Œè¯æ˜æ–¹æ³•åœ¨ä¸åŒæ•°æ®åˆ†å¸ƒä¸‹çš„é€šç”¨æ€§ã€‚}
\label{tab:dedup_leakage}
\begin{tabular}{lrrrr}
\toprule
æ•°æ®é›† & åŸå§‹æ ·æœ¬ & ä¿ç•™ç‡ & åŸå§‹æ³„æ¼ & å»é‡åæ³„æ¼ \\
\midrule
SMS (UCI) & 5,574 & 92.0\% & 139 & \textbf{0} \\
SpamAssassin & 6,008 & 48.0\% & 1,043 & \textbf{0} \\
\bottomrule
\end{tabular}
\end{table}
```

---

## æäº¤è®°å½•

**Git Commit**: `5e7e642`

**Commit Message**:
```
Add DedupShift leakage statistics table - quantitative evidence for data leak elimination

- Create generate_leakage_table.py to extract metrics from dedup reports
- Generate dedup_leakage_stats.csv showing:
  * SMS: 139 overlaps eliminated (92% retention)
  * SpamAssassin: 1043 overlaps eliminated (48% retention)
  * 100% train/test leak elimination for both datasets
- Update Makefile to integrate leakage table generation into paper_repro
- Add DEDUP_LEAKAGE_EVIDENCE.md with citation guidelines and discussion

This completes the DedupShift evidence chain for paper submission.
```

**å·²æ¨é€**: âœ… å·²æ¨é€åˆ° `origin/main`

---

## å¤ç°éªŒè¯

### å¿«é€ŸéªŒè¯
```bash
# ç”Ÿæˆç»Ÿè®¡è¡¨
make generate_leakage_table

# æŸ¥çœ‹ç»“æœ
cat results/dedup_leakage_stats.csv
```

### å®Œæ•´å¤ç°
```bash
# ä¸€é”®è¿è¡Œæ‰€æœ‰å®éªŒï¼ˆåŒ…æ‹¬å»é‡ã€è®­ç»ƒã€ç»Ÿè®¡è¡¨ç”Ÿæˆï¼‰
make paper_repro
```

---

## ä»·å€¼æ€»ç»“

### 1. **å­¦æœ¯ä»·å€¼**
- ä»"æå‡ºæ–¹æ³•"å‡çº§ä¸º"æ–¹æ³•+å®è¯éªŒè¯"
- æ»¡è¶³ä¼šè®®å®¡ç¨¿äººå¯¹"å®šé‡è¯æ®"çš„è¦æ±‚
- å¯ä½œä¸º related work ä¸­"æ•°æ®æ³„æ¼æ§åˆ¶"çš„å¯¹æ¯”åŸºå‡†

### 2. **å®ç”¨ä»·å€¼**
- è¯æ˜ DedupShift åœ¨çœŸå®æ•°æ®é›†ä¸Šçš„æœ‰æ•ˆæ€§
- æ­ç¤ºä¸åŒæ•°æ®ç‰¹å¾å¯¹å»é‡ç‡çš„å½±å“ï¼ˆSMS 8% vs SpamAssassin 52%ï¼‰
- ä¸ºå…¶ä»–æ–‡æœ¬åˆ†ç±»ç ”ç©¶æä¾›å¯å¤ç”¨çš„æ•°æ®é¢„å¤„ç†æ–¹æ³•

### 3. **å†™ä½œä»·å€¼**
- æä¾›å¯ç›´æ¥å¼•ç”¨çš„æ•°å­—ï¼ˆ139/1043 æ³„æ¼æ¶ˆé™¤ï¼‰
- å¢å¼ºè®ºæ–‡çš„"æ•°æ®é©±åŠ¨"å™äº‹
- ä¸º Threats to Validity ç« èŠ‚æä¾›è®¨è®ºç´ æ

---

## åç»­å»ºè®®

### å¯é€‰å¢å¼ºï¼ˆå¦‚æœæ—¶é—´å……è¶³ï¼‰
1. **å¯è§†åŒ–**: ç”Ÿæˆæ³„æ¼æ¶ˆé™¤å‰åçš„éŸ¦æ©å›¾ï¼ˆtrain/val/test é‡å å¯¹æ¯”ï¼‰
2. **æ•æ„Ÿæ€§åˆ†æ**: å±•ç¤ºä¸åŒ h_thresh å¯¹ä¿ç•™ç‡çš„å½±å“ï¼ˆå·²æœ‰è„šæœ¬ï¼Œå¯å¤ç”¨ï¼‰
3. **Case Study**: æŠ½å–å‡ ä¸ªè¢«å»é™¤çš„"è¿‘ä¼¼é‡å¤"æ ·æœ¬ï¼Œå±•ç¤ºä¸ºä»€ä¹ˆå®ƒä»¬ä¼šå¯¼è‡´æ³„æ¼

### è®ºæ–‡å†™ä½œ Checklist
- [ ] åœ¨ DedupShift ç« èŠ‚æ·»åŠ å®šé‡éªŒè¯æ®µè½
- [ ] æ’å…¥è¡¨æ ¼ï¼ˆTable: DedupShift æ³„æ¼æ¶ˆé™¤è¯æ®ï¼‰
- [ ] åœ¨ Abstract ä¸­æ›´æ–°å…³é”®æ•°å­—ï¼ˆ139/1043 æ³„æ¼æ¶ˆé™¤ï¼‰
- [ ] åœ¨ Threats ç« èŠ‚è®¨è®ºæ ·æœ¬é‡å‡å°‘çš„å½±å“
- [ ] åœ¨ Conclusion ä¸­å¼ºè°ƒæ³„æ¼æ§åˆ¶çš„é‡è¦æ€§

---

**å®Œæˆæ—¶é—´**: 2025-01-XX  
**å¯¹åº” Git Tag**: v1.0.0  
**æ–‡æ¡£ç‰ˆæœ¬**: Final (ready for submission)

---

**ä¸‹ä¸€æ­¥**: å°† `DEDUP_LEAKAGE_EVIDENCE.md` ä¸­çš„å†…å®¹æ•´åˆåˆ°è®ºæ–‡ï¼Œè¿è¡Œ `make paper_repro` éªŒè¯ä¸€éï¼Œå³å¯å‡†å¤‡æŠ•ç¨¿ ğŸš€
